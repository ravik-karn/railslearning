Started GET "/" for ::1 at 2016-09-28 14:09:41 +0530
Processing by Rails::WelcomeController#index as HTML
  Parameters: {"internal"=>true}
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/templates/rails/welcome/index.html.erb (5.9ms)
Completed 200 OK in 55ms (Views: 15.7ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-09-28 14:28:50 +0530
Processing by Rails::WelcomeController#index as HTML
  Parameters: {"internal"=>true}
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/templates/rails/welcome/index.html.erb (7.1ms)
Completed 200 OK in 42ms (Views: 27.6ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-09-28 15:15:45 +0530
Processing by ApplicationController#hello as HTML
  Rendering html template
  Rendered html template (0.0ms)
Completed 200 OK in 10ms (Views: 10.1ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-09-28 16:33:11 +0530
Processing by ApplicationController#hello as HTML
  Rendering html template
  Rendered html template (0.0ms)
Completed 200 OK in 37ms (Views: 27.3ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-09-28 16:57:55 +0530
Processing by ApplicationController#hello as HTML
  Rendering html template
  Rendered html template (0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-09-29 10:30:26 +0530
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rails db:migrate RAILS_ENV=development

):
  
activerecord (5.0.0.1) lib/active_record/migration.rb:572:in `check_pending!'
activerecord (5.0.0.1) lib/active_record/migration.rb:548:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'
web-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.3.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in `block in tagged'
activesupport (5.0.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in `tagged'
railties (5.0.0.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.0) lib/puma/configuration.rb:225:in `call'
puma (3.6.0) lib/puma/server.rb:578:in `handle_request'
puma (3.6.0) lib/puma/server.rb:415:in `process_client'
puma (3.6.0) lib/puma/server.rb:275:in `block in run'
puma (3.6.0) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.2ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.1ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (101.1ms)
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsers (20160929045925)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20160929045925"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-09-29 05:00:56 UTC], ["updated_at", 2016-09-29 05:00:56 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/" for ::1 at 2016-09-29 10:31:04 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ApplicationController#hello as HTML
  Rendering html template
  Rendered html template (0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2016-09-29 10:31:06 +0530
Processing by ApplicationController#hello as HTML
  Rendering html template
  Rendered html template (0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms)


Started GET "/users" for ::1 at 2016-09-29 10:51:34 +0530
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 1071ms (Views: 1063.5ms | ActiveRecord: 0.3ms)


Started GET "/users/new" for ::1 at 2016-09-29 10:51:41 +0530
Processing by UsersController#new as HTML
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (44.7ms)
  Rendered users/new.html.erb within layouts/application (47.3ms)
Completed 200 OK in 94ms (Views: 84.5ms | ActiveRecord: 0.8ms)


Started GET "/users.json" for ::1 at 2016-09-29 10:53:04 +0530
Processing by UsersController#index as JSON
  Rendering users/index.json.jbuilder
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.json.jbuilder (9.7ms)
Completed 200 OK in 18ms (Views: 15.2ms | ActiveRecord: 0.2ms)


Started GET "/users.json" for ::1 at 2016-09-29 11:06:25 +0530
Processing by UsersController#index as JSON
  Rendering users/index.json.jbuilder
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.json.jbuilder (2.1ms)
Completed 200 OK in 15ms (Views: 8.5ms | ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2016-09-29 11:06:31 +0530
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 39ms (Views: 36.1ms | ActiveRecord: 0.1ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateMicroposts (20160929060944)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "microposts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "content" text, "user_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20160929060944"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/microposts" for ::1 at 2016-09-29 11:43:42 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by MicropostsController#index as HTML
  Rendering microposts/index.html.erb within layouts/application
  [1m[36mMicropost Load (0.3ms)[0m  [1m[34mSELECT "microposts".* FROM "microposts"[0m
  Rendered microposts/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 107ms (Views: 101.2ms | ActiveRecord: 0.6ms)


Started GET "/microposts/new" for ::1 at 2016-09-29 11:43:48 +0530
Processing by MicropostsController#new as HTML
  Rendering microposts/new.html.erb within layouts/application
  Rendered microposts/_form.html.erb (14.7ms)
  Rendered microposts/new.html.erb within layouts/application (17.1ms)
Completed 200 OK in 59ms (Views: 44.6ms | ActiveRecord: 0.3ms)


Started POST "/microposts" for ::1 at 2016-09-29 11:44:26 +0530
Processing by MicropostsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NVJkxODV6/4mS3UTYlINDHKLZkLRNK2KaUaPNp+UdSrBkdb3uBCAEE6AK61XYG4CoWVbOmbt9VFkTYHGT7h9wA==", "micropost"=>{"content"=>"LOG INSIGN UP\r\nCover webCover bg a267f19fd8b824c7c0873181647cc75bb6d54a494aa1942f1e24244792c9c684\r\nRUBY ON RAILS TUTORIAL (RAILS 5)\r\nLearn Web Development with Rails\r\nMichael Hartl\r\nBOOK INFO CONTACT AUTHOR\r\n Logo shield b 7be3bbe072c03d6cb05d124789361513ce241a2d1fc123249652abb6acb5b128\r\nNew to software development?\r\nWe want to teach you the single most valuable skill you can learn in the 21st century. Read the Learn Enough Story to find out more.\r\nSTART LEARNING NOW\r\nFrontmatter\r\nChapter 1: From zero to deploy\r\nChapter 2: A toy app\r\nChapter 3: Mostly static pages\r\nChapter 4: Rails-flavored Ruby\r\nChapter 5: Filling in the layout\r\nChapter 6: Modeling users\r\nChapter 7: Sign up\r\nChapter 8: Basic login\r\nChapter 9: Advanced login\r\nChapter 10: Updating, showing, and deleting users\r\nChapter 11: Account activation\r\nChapter 12: Password reset\r\nChapter 13: User microposts\r\nChapter 14: Following users\r\n MAILING LIST  BUY NOW     SINGLE PAGE  ◄ ▲ ► Chapter 2: A toy app\r\nChapter 2\r\nA toy app\r\n\r\nIn this chapter, we’ll develop a toy demo application to show off some of the power of Rails. The purpose is to get a high-level overview of Ruby on Rails programming (and web development in general) by rapidly generating an application using scaffold generators, which create a large amount of functionality automatically. As discussed in Box 1.2, the rest of the book will take the opposite approach, developing a full sample application incrementally and explaining each new concept as it arises, but for a quick overview (and some instant gratification) there is no substitute for scaffolding. The resulting toy app will allow us to interact with it through its URLs, giving us insight into the structure of a Rails application, including a first example of the REST architecture favored by Rails.\r\n\r\nAs with the forthcoming sample application, the toy app will consist of users and their associated microposts (thus constituting a minimalist Twitter-style app). The functionality will be utterly under-developed, and many of the steps will seem like magic, but worry not: the full sample app will develop a similar application from the ground up starting in Chapter 3, and I will provide plentiful forward-references to later material. In the mean time, have patience and a little faith—the whole point of this tutorial is to take you beyond this superficial, scaffold-driven approach to achieve a deeper understanding of Rails.\r\n\r\n2.1 Planning the application\r\n\r\nIn this section, we’ll outline our plans for the toy application. As in Section 1.3, we’ll start by generating the application skeleton using the rails new command with a specific Rails version number:\r\n\r\n$ cd ~/workspace\r\n$ rails _5.0.0.1_ new toy_app\r\n$ cd toy_app/\r\nIf you’re using the cloud IDE as recommended in Section 1.2.1, note that this second app can be created in the same workspace as the first. It is not necessary to create a new workspace. In order to get the files to appear, you may need to click the gear icon in the file navigator area and select “Refresh File Tree”.\r\n\r\nNext, we’ll use a text editor to update the Gemfile needed by Bundler with the contents of Listing 2.1. Important note: For all the Gemfiles in this book, you should use the version numbers listed at gemfiles-4th-ed.railstutorial.org instead of the ones listed below (although they should be identical if you are reading this online).\r\n\r\nListing 2.1: A Gemfile for the toy app.\r\nsource 'https://rubygems.org'\r\n\r\ngem 'rails',        '5.0.0.1'\r\ngem 'puma',         '3.4.0'\r\ngem 'sass-rails',   '5.0.6'\r\ngem 'uglifier',     '3.0.0'\r\ngem 'coffee-rails', '4.2.1'\r\ngem 'jquery-rails', '4.1.1'\r\ngem 'turbolinks',   '5.0.1'\r\ngem 'jbuilder',     '2.4.1'\r\n\r\ngroup :development, :test do\r\n  gem 'sqlite3', '1.3.11'\r\n  gem 'byebug',  '9.0.0', platform: :mri\r\nend\r\n\r\ngroup :development do\r\n  gem 'web-console',           '3.1.1'\r\n  gem 'listen',                '3.0.8'\r\n  gem 'spring',                '1.7.2'\r\n  gem 'spring-watcher-listen', '2.0.0'\r\nend\r\n\r\ngroup :production do\r\n  gem 'pg', '0.18.4'\r\nend\r\n\r\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\r\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\r\nNote that Listing 2.1 is identical to Listing 1.14.\r\n\r\nAs in Section 1.5.1, we’ll install the local gems while suppressing the installation of production gems using the --without production option:\r\n\r\n$ bundle install --without production\r\nAs noted in Section 1.3.1, you may need to run bundle update as well (Box 1.1).\r\n\r\nFinally, we’ll put the toy app under version control with Git:\r\n\r\n$ git init\r\n$ git add -A\r\n$ git commit -m \"Initialize repository\"\r\nYou should also create a new repository by clicking on the “Create” button at Bitbucket (Figure 2.1), and then push up to the remote repository:\r\n\r\n$ git remote add origin git@bitbucket.org:<username>/toy_app.git\r\n$ git push -u origin --all\r\nimages/figures/create_demo_repo_bitbucket\r\nFigure 2.1: Creating the toy app repository at Bitbucket.\r\nFinally, it’s never too early to deploy, which I suggest doing by following the same “hello, world!” steps from Section 1.3.4, as shown in Listing 2.2 and Listing 2.3.\r\n\r\nListing 2.2: Adding a hello action to the Application controller.\r\napp/controllers/application_controller.rb\r\n class ApplicationController < ActionController::Base\r\n  protect_from_forgery with: :exception\r\n\r\n  def hello\r\n    render html: \"hello, world!\"\r\n  end\r\nend\r\nListing 2.3: Setting the root route.\r\nconfig/routes.rb\r\n Rails.application.routes.draw do\r\n  root 'application#hello'\r\nend\r\nThen commit the changes and push up to Heroku:\r\n\r\n$ git commit -am \"Add hello\"\r\n$ heroku create\r\n$ git push heroku master\r\n(As in Section 1.5, you may see some warning messages, which you should ignore for now. We’ll deal with them in Section 7.5.) Apart from the URL of the Heroku app, the result should be the same as in Figure 1.20.\r\n\r\nNow we’re ready to start making the app itself. The typical first step when making a web application is to create a data model, which is a representation of the structures needed by our application. In our case, the toy app will be a Twitter-style microblog, with only users and short (micro)posts. Thus, we’ll begin with a model for users of the app (Section 2.1.1), and then we’ll add a model for microposts (Section 2.1.2).\r\n\r\n2.1.1 A toy model for users\r\n\r\nThere are as many choices for a user data model as there are different registration forms on the web; for simplicity, we’ll go with a distinctly minimalist approach. Users of our toy app will have a unique identifier called id (of type integer), a publicly viewable name (of type string), and an email address (also of type string) that will double as a unique username. A summary of the data model for users appears in Figure 2.2.\r\n\r\ndemo_user_model\r\nFigure 2.2: The data model for users.\r\nAs we’ll see starting in Section 6.1.1, the label users in Figure 2.2 corresponds to a table in a database, and the id, name, and email attributes are columns in that table.\r\n\r\n2.1.2 A toy model for microposts\r\n\r\nThe core of the micropost data model is even simpler than the one for users: a micropost has only an id and a content field for the micropost’s text (of type text).1 There’s an additional complication, though: we want to associate each micropost with a particular user. We’ll accomplish this by recording the user_id of the owner of the post. The results are shown in Figure 2.3.\r\n\r\ndemo_micropost_model\r\nFigure 2.3: The data model for microposts.\r\nWe’ll see in Section 2.3.3 (and more fully in Chapter 13) how this user_id attribute allows us to succinctly express the notion that a user potentially has many associated microposts.\r\n\r\n2.2 The Users resource\r\n\r\nIn this section, we’ll implement the users data model in Section 2.1.1, along with a web interface to that model. The combination will constitute a Users resource, which will allow us to think of users as objects that can be created, read, updated, and deleted through the web via the HTTP protocol. As promised in the introduction, our Users resource will be created by a scaffold generator program, which comes standard with each Rails project. I urge you not to look too closely at the generated code; at this stage, it will only serve to confuse you.\r\n\r\nRails scaffolding is generated by passing the scaffold command to the rails generate script. The argument of the scaffold command is the singular version of the resource name (in this case, User), together with optional parameters for the data model’s attributes:2\r\n\r\n$ rails generate scaffold User name:string email:string\r\n      invoke  active_record\r\n      create    db/migrate/20160515001017_create_users.rb\r\n      create    app/models/user.rb\r\n      invoke    test_unit\r\n      create      test/models/user_test.rb\r\n      create      test/fixtures/users.yml\r\n      invoke  resource_route\r\n       route    resources :users\r\n      invoke  scaffold_controller\r\n      create    app/controllers/users_controller.rb\r\n      invoke    erb\r\n      create      app/views/users\r\n      create      app/views/users/index.html.erb\r\n      create      app/views/users/edit.html.erb\r\n      create      app/views/users/show.html.erb\r\n      create      app/views/users/new.html.erb\r\n      create      app/views/users/_form.html.erb\r\n      invoke    test_unit\r\n      create      test/controllers/users_controller_test.rb\r\n      invoke    helper\r\n      create      app/helpers/users_helper.rb\r\n      invoke      test_unit\r\n      invoke    jbuilder\r\n      create      app/views/users/index.json.jbuilder\r\n      create      app/views/users/show.json.jbuilder\r\n      invoke  assets\r\n      invoke    coffee\r\n      create      app/assets/javascripts/users.coffee\r\n      invoke    scss\r\n      create      app/assets/stylesheets/users.scss\r\n      invoke  scss\r\n      create    app/assets/stylesheets/scaffolds.scss\r\nBy including name:string and email:string, we have arranged for the User model to have the form shown in Figure 2.2. (Note that there is no need to include a parameter for id; it is created automatically by Rails for use as the primary key in the database.)\r\n\r\nTo proceed with the toy application, we first need to migrate the database using rails db:migrate, as shown in Listing 2.4.\r\n\r\nListing 2.4: Migrating the database.\r\n$ rails db:migrate\r\n==  CreateUsers: migrating ====================================================\r\n-- create_table(:users)\r\n   -> 0.0017s\r\n==  CreateUsers: migrated (0.0018s) ===========================================\r\nThe effect of Listing 2.4 is to update the database with our new users data model. (We’ll learn more about database migrations starting in Section 6.1.1.)\r\n\r\nBy the way, it is important to note that in every version of Rails before Rails 5, the db:migrate command used rake in place of rails, so for the sake of legacy applications it’s important to know how to use Rake (Box 2.1)\r\n\r\nBox 2.1. Rake\r\nIn the Unix tradition, the Make utility has played an important role in building executable programs from source code. Rake is Ruby make, a Make-like language written in Ruby.\r\n\r\nBefore Rails 5, Ruby on Rails used Rake extensively, so for the sake of legacy Rails applications it’s important to know how to use it. Probably the two most common Rake commands in a Rails context are rake db:migrate (to update the database with a data model) and rake test (to run the automated test suite). In these and other uses of rake, it’s important to ensure that the command uses the version of Rake corresponding to the Rails application’s Gemfile, which is accomplished using the Bundler command bundler exec. Thus, the migration command\r\n\r\n  $ rails db:migrate\r\nwould be written as\r\n\r\n  $ bundle exec rake db:migrate\r\nHaving run the migration in Listing 2.4, we can run the local webserver in a separate tab (Figure 1.8) as follows:\r\n\r\n$ rails server -b $IP -p $PORT    # Use `rails server` if running locally.\r\nNow the toy application should be available on the local server as described in Section 1.3.2. (If you’re using the cloud IDE, be sure to open the resulting development server in a new browser tab, not inside the IDE itself.)\r\n\r\n2.2.1 A user tour\r\n\r\nIf we visit the root URL at / (read “slash”, as noted in Section 1.3.4), we get the same “hello, world!” page shown in Figure 1.12, but in generating the Users resource scaffolding we have also created a large number of pages for manipulating users. For example, the page for listing all users is at /users, and the page for making a new user is at /users/new. The rest of this section is dedicated to taking a whirlwind tour through these user pages. As we proceed, it may help to refer to Table 2.1, which shows the correspondence between pages and URLs.\r\n\r\nURL\tAction\tPurpose\r\n/users\tindex\tpage to list all users\r\n/users/1\tshow\tpage to show user with id 1\r\n/users/new\tnew\tpage to make a new user\r\n/users/1/edit\tedit\tpage to edit user with id 1\r\nTable 2.1: The correspondence between pages and URLs for the Users resource.\r\nWe start with the page to show all the users in our application, called index and located at /users. As you might expect, initially there are no users at all (Figure 2.4).\r\n\r\nimages/figures/demo_blank_user_index_3rd_edition\r\nFigure 2.4: The initial index page for the Users resource (/users).\r\nTo make a new user, we visit the new page at /users/new, as shown in Figure 2.5. In Chapter 7, this will become the user signup page.\r\n\r\nimages/figures/demo_new_user_3rd_edition\r\nFigure 2.5: The new user page (/users/new).\r\nWe can create a user by entering name and email values in the text fields and then clicking the Create User button. The result is the user show page at /users/1, as seen in Figure 2.6. (The green welcome message is accomplished using the flash, which we’ll learn about in Section 7.4.2.) Note that the URL is /users/1; as you might suspect, the number 1 is simply the user’s id attribute from Figure 2.2. In Section 7.1, this page will become the user’s profile page.\r\n\r\nimages/figures/demo_show_user_3rd_edition\r\nFigure 2.6: The page to show a user (/users/1).\r\nTo change a user’s information, we visit the edit page at /users/1/edit (Figure 2.7). By modifying the user information and clicking the Update User button, we arrange to change the information for the user in the toy application (Figure 2.8). (As we’ll see in detail starting in Chapter 6, this user data is stored in a database back-end.) We’ll add user edit/update functionality to the sample application in Section 10.1.\r\n\r\nimages/figures/demo_edit_user_3rd_edition\r\nFigure 2.7: The user edit page (/users/1/edit).\r\nimages/figures/demo_update_user_3rd_edition\r\nFigure 2.8: A user with updated information.\r\nNow we’ll create a second user by revisiting the new page at /users/new and submitting a second set of user information. The resulting user index is shown in Figure 2.9. Section 7.1 will develop the user index into a more polished page for showing all users.\r\n\r\nimages/figures/demo_user_index_two_3rd_edition\r\nFigure 2.9: The user index page (/users) with a second user.\r\nHaving shown how to create, show, and edit users, we come finally to destroying them (Figure 2.10). You should verify that clicking on the link in Figure 2.10 destroys the second user, yielding an index page with only one user. (If it doesn’t work, be sure that JavaScript is enabled in your browser; Rails uses JavaScript to issue the request needed to destroy a user.) Section 10.4 adds user deletion to the sample app, taking care to restrict its use to a special class of administrative users.\r\n\r\nimages/figures/demo_destroy_user_3rd_edition\r\nFigure 2.10: Destroying a user.\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\n(For readers who know CSS) Create a new user, then use your browser’s HTML inspector to determine the CSS id for the text “User was successfully created.” What happens when you refresh your browser?\r\nWhat happens if you try to create a user with a name but no email address?\r\nWhat happens if you try create a user with an invalid email address, like “@example.com”?\r\nDestroy each of the users created in the previous exercises. Does Rails display a message by default when a user is destroyed?\r\n2.2.2 MVC in action\r\n\r\nNow that we’ve completed a quick overview of the Users resource, let’s examine one particular part of it in the context of the Model-View-Controller (MVC) pattern introduced in Section 1.3.3. Our strategy will be to describe the results of a typical browser hit—a visit to the user index page at /users—in terms of MVC (Figure 2.11).\r\n\r\nimages/figures/mvc_detailed\r\nFigure 2.11: A detailed diagram of MVC in Rails.\r\nHere is a summary of the steps shown in Figure 2.11:\r\n\r\nThe browser issues a request for the /users URL.\r\nRails routes /users to the index action in the Users controller.\r\nThe index action asks the User model to retrieve all users (User.all).\r\nThe User model pulls all the users from the database.\r\nThe User model returns the list of users to the controller.\r\nThe controller captures the users in the @users variable, which is passed to the index view.\r\nThe view uses embedded Ruby to render the page as HTML.\r\nThe controller passes the HTML back to the browser.3\r\nNow let’s take a look at the above steps in more detail. We start with a request issued from the browser—i.e., the result of typing a URL in the address bar or clicking on a link (Step 1 in Figure 2.11). This request hits the Rails router (Step 2), which dispatches the request to the proper controller action based on the URL (and, as we’ll see in Box 3.2, the type of request). The code to create the mapping of user URLs to controller actions for the Users resource appears in Listing 2.5. This code effectively sets up the table of URL/action pairs seen in Table 2.1. (The strange notation :users is a symbol, which we’ll learn about in Section 4.3.3.)\r\n\r\nListing 2.5: The Rails routes, with a rule for the Users resource.\r\nconfig/routes.rb\r\n Rails.application.routes.draw do\r\n  resources :users\r\n  root 'application#hello'\r\nend\r\nWhile we’re looking at the routes file, let’s take a moment to associate the root route with the users index, so that “slash” goes to /users. Recall from Listing 2.3 that we added the root route\r\n\r\nroot 'application#hello'\r\nso that the root route went to the hello action in the Application controller. In the present case, we want to use the index action in the Users controller, which we can arrange using the code shown in Listing 2.6.\r\n\r\nListing 2.6: Adding a root route for users.\r\nconfig/routes.rb\r\n Rails.application.routes.draw do\r\n  resources :users\r\n  root 'users#index'\r\nend\r\nA controller contains a collection of related actions, and the pages from the tour in Section 2.2.1 correspond to actions in the Users controller. The controller generated by the scaffolding is shown schematically in Listing 2.7. Note the code class UsersController < ApplicationController, which is an example of a Ruby class with inheritance. (We’ll discuss inheritance briefly in Section 2.3.4 and cover both subjects in more detail in Section 4.4.)\r\n\r\nListing 2.7: The Users controller in schematic form.\r\napp/controllers/users_controller.rb\r\n class UsersController < ApplicationController\r\n  .\r\n  .\r\n  .\r\n  def index\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def show\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def new\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def edit\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def create\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def update\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def destroy\r\n    .\r\n    .\r\n    .\r\n  end\r\nend\r\nYou may notice that there are more actions than there are pages; the index, show, new, and edit actions all correspond to pages from Section 2.2.1, but there are additional create, update, and destroy actions as well. These actions don’t typically render pages (although they can); instead, their main purpose is to modify information about users in the database. This full suite of controller actions, summarized in Table 2.2, represents the implementation of the REST architecture in Rails (Box 2.2), which is based on the ideas of representational state transfer identified and named by computer scientist Roy Fielding.4 Note from Table 2.2 that there is some overlap in the URLs; for example, both the user show action and the update action correspond to the URL /users/1. The difference between them is the HTTP request method they respond to. We’ll learn more about HTTP request methods starting in Section 3.3.\r\n\r\nHTTP request\tURL\tAction\tPurpose\r\nGET\t/users\tindex\tpage to list all users\r\nGET\t/users/1\tshow\tpage to show user with id 1\r\nGET\t/users/new\tnew\tpage to make a new user\r\nPOST\t/users\tcreate\tcreate a new user\r\nGET\t/users/1/edit\tedit\tpage to edit user with id 1\r\nPATCH\t/users/1\tupdate\tupdate user with id 1\r\nDELETE\t/users/1\tdestroy\tdelete user with id 1\r\nTable 2.2: RESTful routes provided by the Users resource in Listing 2.5.\r\nBox 2.2. REpresentational State Transfer (REST)\r\nIf you read much about Ruby on Rails web development, you’ll see a lot of references to “REST”, which is an acronym for REpresentational State Transfer. REST is an architectural style for developing distributed, networked systems and software applications such as the World Wide Web and web applications. Although REST theory is rather abstract, in the context of Rails applications REST means that most application components (such as users and microposts) are modeled as resources that can be created, read, updated, and deleted—operations that correspond both to the CRUD operations of relational databases and to the four fundamental HTTP request methods: POST, GET, PATCH, and DELETE. (We’ll learn more about HTTP requests in Section 3.3 and especially Box 3.2.)\r\n\r\nAs a Rails application developer, the RESTful style of development helps you make choices about which controllers and actions to write: you simply structure the application using resources that get created, read, updated, and deleted. In the case of users and microposts, this process is straightforward, since they are naturally resources in their own right. In Chapter 14, we’ll see an example where REST principles allow us to model a subtler problem, “following users”, in a natural and convenient way.\r\n\r\nTo examine the relationship between the Users controller and the User model, let’s focus on a simplified version of the index action, shown in Listing 2.8. (Learning how to read code even when you don’t fully understand it is an important aspect of technical sophistication (Box 1.1).)\r\n\r\nListing 2.8: The simplified user index action for the toy application.\r\napp/controllers/users_controller.rb\r\n class UsersController < ApplicationController\r\n  .\r\n  .\r\n  .\r\n  def index\r\n    @users = User.all\r\n  end\r\n  .\r\n  .\r\n  .\r\nend\r\nThis index action has the line @users = User.all (Step 3 in Figure 2.11), which asks the User model to retrieve a list of all the users from the database (Step 4), and then places them in the variable @users (pronounced “at-users”) (Step 5). The User model itself appears in Listing 2.9; although it is rather plain, it comes equipped with a large amount of functionality because of inheritance (Section 2.3.4 and Section 4.4). In particular, by using the Rails library called Active Record, the code in Listing 2.9 arranges for User.all to return all the users in the database.\r\n\r\nListing 2.9: The User model for the toy application.\r\napp/models/user.rb\r\n class User < ApplicationRecord\r\nend\r\nOnce the @users variable is defined, the controller calls the view (Step 6), shown in Listing 2.10. Variables that start with the @ sign, called instance variables, are automatically available in the views; in this case, the index.html.erb view in Listing 2.10 iterates through the @users list and outputs a line of HTML for each one. (Remember, you aren’t supposed to understand this code right now. It is shown only for purposes of illustration.)\r\n\r\nListing 2.10: The view for the user index.\r\napp/views/users/index.html.erb\r\n <h1>Listing users</h1>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>Name</th>\r\n      <th>Email</th>\r\n      <th colspan=\"3\"></th>\r\n    </tr>\r\n  </thead>\r\n\r\n<% @users.each do |user| %>\r\n  <tr>\r\n    <td><%= user.name %></td>\r\n    <td><%= user.email %></td>\r\n    <td><%= link_to 'Show', user %></td>\r\n    <td><%= link_to 'Edit', edit_user_path(user) %></td>\r\n    <td><%= link_to 'Destroy', user, method: :delete,\r\n                                     data: { confirm: 'Are you sure?' } %></td>\r\n  </tr>\r\n<% end %>\r\n</table>\r\n\r\n<br>\r\n\r\n<%= link_to 'New User', new_user_path %>\r\nThe view converts its contents to HTML (Step 7), which is then returned by the controller to the browser for display (Step 8).\r\n\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\nBy referring to Figure 2.11, write out the analogous steps for visiting the URL /users/1/edit.\r\nFind the line in the scaffolding code that retrieves the user from the database in the previous exercise.\r\nWhat is the name of the view file for the user edit page?\r\n2.2.3 Weaknesses of this Users resource\r\n\r\nThough good for getting a general overview of Rails, the scaffold Users resource suffers from a number of severe weaknesses.\r\n\r\nNo data validations. Our User model accepts data such as blank names and invalid email addresses without complaint.\r\nNo authentication. We have no notion of logging in or out, and no way to prevent any user from performing any operation.\r\nNo tests. This isn’t technically true—the scaffolding includes rudimentary tests—but the generated tests don’t test for data validation, authentication, or any other custom requirements.\r\nNo style or layout. There is no consistent site styling or navigation.\r\nNo real understanding. If you understand the scaffold code, you probably shouldn’t be reading this book.\r\n2.3 The Microposts resource\r\n\r\nHaving generated and explored the Users resource, we turn now to the associated Microposts resource. Throughout this section, I recommend comparing the elements of the Microposts resource with the analogous user elements from Section 2.2; you should see that the two resources parallel each other in many ways. The RESTful structure of Rails applications is best absorbed by this sort of repetition of form—indeed, seeing the parallel structure of Users and Microposts even at this early stage is one of the prime motivations for this chapter.\r\n\r\n2.3.1 A micropost microtour\r\n\r\nAs with the Users resource, we’ll generate scaffold code for the Microposts resource using rails generate scaffold, in this case implementing the data model from Figure 2.3:5\r\n\r\n$ rails generate scaffold Micropost content:text user_id:integer\r\n      invoke  active_record\r\n      create    db/migrate/20160515211229_create_microposts.rb\r\n      create    app/models/micropost.rb\r\n      invoke    test_unit\r\n      create      test/models/micropost_test.rb\r\n      create      test/fixtures/microposts.yml\r\n      invoke  resource_route\r\n       route    resources :microposts\r\n      invoke  scaffold_controller\r\n      create    app/controllers/microposts_controller.rb\r\n      invoke    erb\r\n      create      app/views/microposts\r\n      create      app/views/microposts/index.html.erb\r\n      create      app/views/microposts/edit.html.erb\r\n      create      app/views/microposts/show.html.erb\r\n      create      app/views/microposts/new.html.erb\r\n      create      app/views/microposts/_form.html.erb\r\n      invoke    test_unit\r\n      create      test/controllers/microposts_controller_test.rb\r\n      invoke    helper\r\n      create      app/helpers/microposts_helper.rb\r\n      invoke      test_unit\r\n      invoke    jbuilder\r\n      create      app/views/microposts/index.json.jbuilder\r\n      create      app/views/microposts/show.json.jbuilder\r\n      invoke  assets\r\n      invoke    coffee\r\n      create      app/assets/javascripts/microposts.coffee\r\n      invoke    scss\r\n      create      app/assets/stylesheets/microposts.scss\r\n      invoke  scss\r\n   identical    app/assets/stylesheets/scaffolds.scss\r\n(If you get an error related to Spring, just run the command again.) To update our database with the new data model, we need to run a migration as in Section 2.2:\r\n\r\n$ rails db:migrate\r\n==  CreateMicroposts: migrating ===============================================\r\n-- create_table(:microposts)\r\n   -> 0.0023s\r\n==  CreateMicroposts: migrated (0.0026s) ======================================\r\nNow we are in a position to create microposts in the same way we created users in Section 2.2.1. As you might guess, the scaffold generator has updated the Rails routes file with a rule for Microposts resource, as seen in Listing 2.11.6 As with users, the resources :microposts routing rule maps micropost URLs to actions in the Microposts controller, as seen in Table 2.3.\r\n\r\nListing 2.11: The Rails routes, with a new rule for Microposts resources.\r\nconfig/routes.rb\r\n Rails.application.routes.draw do\r\n  resources :microposts\r\n  resources :users\r\n  root 'users#index'\r\nend\r\nHTTP request\tURL\tAction\tPurpose\r\nGET\t/microposts\tindex\tpage to list all microposts\r\nGET\t/microposts/1\tshow\tpage to show micropost with id 1\r\nGET\t/microposts/new\tnew\tpage to make a new micropost\r\nPOST\t/microposts\tcreate\tcreate a new micropost\r\nGET\t/microposts/1/edit\tedit\tpage to edit micropost with id 1\r\nPATCH\t/microposts/1\tupdate\tupdate micropost with id 1\r\nDELETE\t/microposts/1\tdestroy\tdelete micropost with id 1\r\nTable 2.3: RESTful routes provided by the Microposts resource in Listing 2.11.\r\nThe Microposts controller itself appears in schematic form in Listing 2.12. Note that, apart from having MicropostsController in place of UsersController, Listing 2.12 is identical to the code in Listing 2.7. This is a reflection of the REST architecture common to both resources.\r\n\r\nListing 2.12: The Microposts controller in schematic form.\r\napp/controllers/microposts_controller.rb\r\n class MicropostsController < ApplicationController\r\n  .\r\n  .\r\n  .\r\n  def index\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def show\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def new\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def edit\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def create\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def update\r\n    .\r\n    .\r\n    .\r\n  end\r\n\r\n  def destroy\r\n    .\r\n    .\r\n    .\r\n  end\r\nend\r\nTo make some actual microposts, we enter information at the new microposts page, /microposts/new, as seen in Figure 2.12.\r\n\r\nimages/figures/demo_new_micropost_3rd_edition\r\nFigure 2.12: The new micropost page (/microposts/new).\r\nAt this point, go ahead and create a micropost or two, taking care to make sure that at least one has a user_id of 1 to match the id of the first user created in Section 2.2.1. The result should look something like Figure 2.13.\r\n\r\nimages/figures/demo_micropost_index_3rd_edition\r\nFigure 2.13: The micropost index page (/microposts).\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\n(For readers who know CSS) Create a new micropost, then use your browser’s HTML inspector to determine the CSS id for the text “Micropost was successfully created.” What happens when you refresh your browser?\r\nTry to create a micropost with empty content and no user id.\r\nTry to create a micropost with over 140 characters of content (say, the first paragraph from the Wikipedia article on Ruby).\r\nDestroy the microposts from the previous exercises.\r\n2.3.2 Putting the micro in microposts\r\n\r\nAny micropost worthy of the name should have some means of enforcing the length of the post. Implementing this constraint in Rails is easy with validations; to accept microposts with at most 140 characters (à la Twitter), we use a length validation. At this point, you should open the file app/models/micropost.rb in your text editor or IDE and fill it with the contents of Listing 2.13.\r\n\r\nListing 2.13: Constraining microposts to be at most 140 characters.\r\napp/models/micropost.rb\r\n class Micropost < ApplicationRecord\r\n  validates :content, length: { maximum: 140 }\r\nend\r\nThe code in Listing 2.13 may look rather mysterious—we’ll cover validations more thoroughly starting in Section 6.2—but its effects are readily apparent if we go to the new micropost page and enter more than 140 characters for the content of the post. As seen in Figure 2.14, Rails renders error messages indicating that the micropost’s content is too long. (We’ll learn more about error messages in Section 7.3.3.)\r\n\r\nimages/figures/micropost_length_error_3rd_edition\r\nFigure 2.14: Error messages for a failed micropost creation.\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\nTry to create a micropost with the same long content used in a previous exercise (Section 2.3.1.1). How has the behavior changed?\r\n(For readers who know CSS) User your browser’s HTML inspector to determine the CSS id of the error message produced by the previous exercise.\r\n2.3.3 A user has_many microposts\r\n\r\nOne of the most powerful features of Rails is the ability to form associations between different data models. In the case of our User model, each user potentially has many microposts. We can express this in code by updating the User and Micropost models as in Listing 2.14 and Listing 2.15.\r\n\r\nListing 2.14: A user has many microposts.\r\napp/models/user.rb\r\n class User < ApplicationRecord\r\n  has_many :microposts\r\nend\r\nListing 2.15: A micropost belongs to a user.\r\napp/models/micropost.rb\r\n class Micropost < ApplicationRecord\r\n  belongs_to :user\r\n  validates :content, length: { maximum: 140 }\r\nend\r\nWe can visualize the result of this association in Figure 2.15. Because of the user_id column in the microposts table, Rails (using Active Record) can infer the microposts associated with each user.\r\n\r\nimages/figures/micropost_user_association\r\nFigure 2.15: The association between microposts and users.\r\nIn Chapter 13 and Chapter 14, we will use the association of users and microposts both to display all of a user’s microposts and to construct a Twitter-like micropost feed. For now, we can examine the implications of the user-micropost association by using the console, which is a useful tool for interacting with Rails applications. We first invoke the console with rails console at the command line, and then retrieve the first user from the database using User.first (putting the results in the variable first_user):7\r\n\r\n$ rails console\r\n>> first_user = User.first\r\n=> #<User id: 1, name: \"Michael Hartl\", email: \"michael@example.org\",\r\ncreated_at: \"2016-05-15 02:01:31\", updated_at: \"2016-05-15 02:01:31\">\r\n>> first_user.microposts\r\n=> [#<Micropost id: 1, content: \"First micropost!\", user_id: 1, created_at:\r\n\"2016-05-15 02:37:37\", updated_at: \"2016-05-15 02:37:37\">, #<Micropost id: 2,\r\ncontent: \"Second micropost\", user_id: 1, created_at: \"2016-05-15 02:38:54\",\r\nupdated_at: \"2016-05-15 02:38:54\">]\r\n>> micropost = first_user.microposts.first    # Micropost.first would also work.\r\n=> #<Micropost id: 1, content: \"First micropost!\", user_id: 1, created_at:\r\n\"2016-05-15 02:37:37\", updated_at: \"2016-05-15 02:37:37\">\r\n>> micropost.user\r\n=> #<User id: 1, name: \"Michael Hartl\", email: \"michael@example.org\",\r\ncreated_at: \"2016-05-15 02:01:31\", updated_at: \"2016-05-15 02:01:31\">\r\n>> exit\r\n(I include exit in the last line just to demonstrate how to exit the console. On most systems, you can also use Ctrl-D for the same purpose.)8 Here we have accessed the user’s microposts using the code first_user.microposts. With this code, Active Record automatically returns all the microposts with user_id equal to the id of first_user (in this case, 1). We’ll learn much more about the association facilities in Active Record in Chapter 13 and Chapter 14.\r\n\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\nEdit the user show page to display the content of the user’s first micropost. (Use your technical sophistication (Box 1.1) to guess the syntax based on the other content in the file.) Confirm by visiting /users/1 that it worked.\r\nThe code in Listing 2.16 shows how to add a validation for the presence of micropost content in order to ensure that microposts can’t be blank. Verify that you get the behavior shown in Figure 2.16.\r\nUpdate Listing 2.17 by replacing FILL_IN with the appropriate code to validate the presence of name and email attributes in the User model (Figure 2.17).\r\nListing 2.16: Code to validate the presence of micropost content.\r\napp/models/micropost.rb\r\n class Micropost < ApplicationRecord\r\n  belongs_to :user\r\n  validates :content, length: { maximum: 140 },\r\n                      presence: true\r\nend\r\nimages/figures/micropost_content_cant_be_blank\r\nFigure 2.16: The effect of a micropost presence validation.\r\nListing 2.17: Adding presence validations to the User model.\r\napp/models/user.rb\r\n class User < ApplicationRecord\r\n  has_many :microposts\r\n  validates FILL_IN, presence: true    # Replace FILL_IN with the right code.\r\n  validates FILL_IN, presence: true    # Replace FILL_IN with the right code.\r\nend\r\nimages/figures/user_presence_validations\r\nFigure 2.17: The effect of presence validations on the User model.\r\n2.3.4 Inheritance hierarchies\r\n\r\nWe end our discussion of the toy application with a brief description of the controller and model class hierarchies in Rails. This discussion will only make much sense if you have some experience with object-oriented programming (OOP), particularly classes. Don’t worry if it’s confusing for now; we’ll discuss these ideas more thoroughly in Section 4.4.\r\n\r\nWe start with the inheritance structure for models. Comparing Listing 2.18 and Listing 2.19, we see that both the User model and the Micropost model inherit (via the left angle bracket <) from ApplicationRecord, which in turn inherits from ActiveRecord::Base, which is the base class for models provided by Active Record; a diagram summarizing this relationship appears in Figure 2.18. It is by inheriting from ActiveRecord::Base that our model objects gain the ability to communicate with the database, treat the database columns as Ruby attributes, and so on.\r\n\r\nListing 2.18: The User class, highlighting inheritance.\r\napp/models/user.rb\r\n class User < ApplicationRecord\r\n  .\r\n  .\r\n  .\r\nend\r\nListing 2.19: The Micropost class, highlighting inheritance.\r\napp/models/micropost.rb\r\n class Micropost < ApplicationRecord\r\n  .\r\n  .\r\n  .\r\nend\r\nimages/figures/demo_model_inheritance_4th_ed\r\nFigure 2.18: The inheritance hierarchy for the User and Micropost models.\r\nThe inheritance structure for controllers is essentially the same as that for models. Comparing Listing 2.20 and Listing 2.21, we see that both the Users controller and the Microposts controller inherit from the Application controller. Examining Listing 2.22, we see that ApplicationController itself inherits from ActionController::Base, which is the base class for controllers provided by the Rails library Action Pack. The relationships between these classes is illustrated in Figure 2.19.\r\n\r\nListing 2.20: The UsersController class, highlighting inheritance.\r\napp/controllers/users_controller.rb\r\n class UsersController < ApplicationController\r\n  .\r\n  .\r\n  .\r\nend\r\nListing 2.21: The MicropostsController class, highlighting inheritance.\r\napp/controllers/microposts_controller.rb\r\n class MicropostsController < ApplicationController\r\n  .\r\n  .\r\n  .\r\nend\r\nListing 2.22: The ApplicationController class, highlighting inheritance.\r\napp/controllers/application_controller.rb\r\n class ApplicationController < ActionController::Base\r\n  .\r\n  .\r\n  .\r\nend\r\nimages/figures/demo_controller_inheritance\r\nFigure 2.19: The inheritance hierarchy for the Users and Microposts controllers.\r\nAs with model inheritance, both the Users and Microposts controllers gain a large amount of functionality by inheriting from a base class (in this case, ActionController::Base), including the ability to manipulate model objects, filter inbound HTTP requests, and render views as HTML. Since all Rails controllers inherit from ApplicationController, rules defined in the Application controller automatically apply to every action in the application. For example, in Section 9.1 we’ll see how to include helpers for logging in and logging out of all of the sample application’s controllers.\r\n\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\nBy examining the contents of the Application controller file, find the line that causes ApplicationController to inherit from ActionController::Base.\r\nIs there an analogous file containing a line where ApplicationRecord inherits from ActiveRecord::Base? Hint: It would probably be a file called something like application_record.rb in the app/models directory.\r\n2.3.5 Deploying the toy app\r\n\r\nWith the completion of the Microposts resource, now is a good time to push the repository up to Bitbucket:\r\n\r\n$ git status\r\n$ git add -A\r\n$ git commit -m \"Finish toy app\"\r\n$ git push\r\nOrdinarily, you should make smaller, more frequent commits, but for the purposes of this chapter a single big commit at the end is fine.\r\n\r\nAt this point, you can also deploy the toy app to Heroku as in Section 1.5:\r\n\r\n$ git push heroku\r\n(This assumes you created the Heroku app in Section 2.1. Otherwise, you should run heroku create and then git push heroku master.)\r\n\r\nTo get the application’s database to work, you’ll also have to migrate the production database, which involves running the migration command from Listing 2.4 prefixed with heroku run:\r\n\r\n$ heroku run rails db:migrate\r\nThis updates the database at Heroku with the necessary user and micropost data models. After running the migration, you should be able to use the toy app in production, with a real PostgreSQL database back-end (Figure 2.20).\r\n\r\nFinally, if you completed the exercises in Section 2.3.3.1, you will have to remove the code to display the first user’s micropost in order to get the app to load properly. In this case, simply delete the offending code, make another commit, and push again to Heroku.\r\n\r\nimages/figures/toy_app_production\r\nFigure 2.20: Running the toy app in production.\r\nExercises\r\n\r\nSolutions to exercises are available for free at railstutorial.org/solutions with any Rails Tutorial purchase. To see other people’s answers and to record your own, join the Learn Enough Society at learnenough.com/society.\r\n\r\nCreate a few users on the production app.\r\nCreate a few production microposts for the first user.\r\nBy trying to create a micropost with content over 140 characters, confirm that the validation from Listing 2.13 works on the production app.\r\n2.4 Conclusion\r\n\r\nWe’ve come now to the end of the high-level overview of a Rails application. The toy app developed in this chapter has several strengths and a host of weaknesses.\r\n\r\nStrengths\r\n\r\nHigh-level overview of Rails\r\nIntroduction to MVC\r\nFirst taste of the REST architecture\r\nBeginning data modeling\r\nA live, database-backed web application in production\r\nWeaknesses\r\n\r\nNo custom layout or styling\r\nNo static pages (such as “Home” or “About”)\r\nNo user passwords\r\nNo user images\r\nNo logging in\r\nNo security\r\nNo automatic user/micropost association\r\nNo notion of “following” or “followed”\r\nNo micropost feed\r\nNo meaningful tests\r\nNo real understanding\r\nThe rest of this tutorial is dedicated to building on the strengths and eliminating the weaknesses.\r\n\r\n2.4.1 What we learned in this chapter\r\n\r\nScaffolding automatically creates code to model data and interact with it through the web.\r\nScaffolding is good for getting started quickly but is bad for understanding.\r\nRails uses the Model-View-Controller (MVC) pattern for structuring web applications.\r\nAs interpreted by Rails, the REST architecture includes a standard set of URLs and controller actions for interacting with data models.\r\nRails supports data validations to place constraints on the values of data model attributes.\r\nRails comes with built-in functions for defining associations between different data models.\r\nWe can interact with Rails applications at the command line using the Rails console.\r\nBecause microposts are short by design, the string type is actually big enough to contain them, but using text better expresses our intent, while also giving us greater flexibility should we ever wish to relax the length constraint. ↑\r\nThe name of the scaffold follows the convention of models, which are singular, rather than resources and controllers, which are plural. Thus, we have User instead of Users. ↑\r\nSome references indicate that the view returns the HTML directly to the browser (via a webserver such as Apache or Nginx). Regardless of the implementation details, I find it helpful to think of the controller as a central hub through which all the application’s information flows. ↑\r\nFielding, Roy Thomas. Architectural Styles and the Design of Network-based Software Architectures. Doctoral dissertation, University of California, Irvine, 2000. ↑\r\nAs with the User scaffold, the scaffold generator for microposts follows the singular convention of Rails models; thus, we have generate Micropost. ↑\r\nThe scaffold code may have extra blank lines compared to Listing 2.11. This is not a cause for concern, as Ruby ignores such extra space. ↑\r\nYour console prompt might be something like 2.1.1 :001 >, but the examples use >> since Ruby versions will vary. ↑\r\nAs with “Ctrl-C”, the capital “D” refers to the key on the keyboard, not the capital letter, so you don’t have to hold down the Shift key along with the Ctrl key. ↑\r\n◄ ▲ ►\r\npowered by Logo foot 2bb1fc62a4fe7cfdd8223560afd5fea72ad2696d7a3886cfe471ef18a80a1fb4\r\n", "user_id"=>"1"}, "commit"=>"Create Micropost"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  Rendering microposts/new.html.erb within layouts/application
  Rendered microposts/_form.html.erb (3.0ms)
  Rendered microposts/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 31ms (Views: 28.2ms | ActiveRecord: 0.2ms)


Started GET "/microposts" for ::1 at 2016-09-29 11:44:38 +0530
Processing by MicropostsController#index as HTML
  Rendering microposts/index.html.erb within layouts/application
  [1m[36mMicropost Load (0.2ms)[0m  [1m[34mSELECT "microposts".* FROM "microposts"[0m
  Rendered microposts/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 30ms (Views: 26.7ms | ActiveRecord: 0.2ms)


Started GET "/microposts" for ::1 at 2016-09-29 12:04:50 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.5ms)


  
NoMethodError (undefined method `persence' for #<Class:0x007f98cb5a2060>
Did you mean?  presence):
  
app/models/micropost.rb:4:in `<class:Micropost>'
app/models/micropost.rb:1:in `<top (required)>'
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.9ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (81.1ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:05:07 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/micropost.rb:4:in `<class:Micropost>'
app/models/micropost.rb:1:in `<top (required)>'
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.9ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (73.3ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:05:35 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  validates :content, length: { maximum: 140 }, presence :true
                                                          ^):
  
app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.5ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (76.0ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:05:38 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  validates :content, length: { maximum: 140 }, presence :true
                                                          ^):
  
app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (71.8ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:05:39 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  validates :content, length: { maximum: 140 }, presence :true
                                                          ^):
  
app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.5ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (77.8ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:05:39 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  validates :content, length: { maximum: 140 }, presence :true
                                                          ^):
  
app/models/micropost.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.1ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (74.6ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:06:31 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:4: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  					  presence :true
  					            ^):
  
app/models/micropost.rb:4: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.9ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (70.3ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:06:53 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:4: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  				presence :true
  				          ^):
  
app/models/micropost.rb:4: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.0ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (72.2ms)
Started GET "/microposts" for ::1 at 2016-09-29 12:06:55 +0530
Processing by MicropostsController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/micropost.rb:4: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  				presence :true
  				          ^):
  
app/models/micropost.rb:4: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/microposts_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.0ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (73.8ms)
Started POST "/__web_console/repl_sessions/ba1edb50ddb0f2b8318d1f9adca4d4cb/trace" for ::1 at 2016-09-29 12:07:03 +0530
Started POST "/__web_console/repl_sessions/ba1edb50ddb0f2b8318d1f9adca4d4cb/trace" for ::1 at 2016-09-29 12:07:07 +0530
Started GET "/microposts" for ::1 at 2016-09-29 12:07:32 +0530
Processing by MicropostsController#index as HTML
  Rendering microposts/index.html.erb within layouts/application
  [1m[36mMicropost Load (0.3ms)[0m  [1m[34mSELECT "microposts".* FROM "microposts"[0m
  Rendered microposts/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 36ms (Views: 29.7ms | ActiveRecord: 0.5ms)


Started GET "/microposts/new" for ::1 at 2016-09-29 12:07:35 +0530
Processing by MicropostsController#new as HTML
  Rendering microposts/new.html.erb within layouts/application
  Rendered microposts/_form.html.erb (2.7ms)
  Rendered microposts/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 35ms (Views: 27.7ms | ActiveRecord: 0.5ms)


Started POST "/microposts" for ::1 at 2016-09-29 12:07:37 +0530
Processing by MicropostsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Op4Zqro4Vn41uxpT/xxBatFxWpGTMINT2wRHrsMqVMgKcpV8i2Kt5Adstd6zhILeKv4EvGVmtZCZx/uayChuQ==", "micropost"=>{"content"=>"", "user_id"=>""}, "commit"=>"Create Micropost"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  Rendering microposts/new.html.erb within layouts/application
  Rendered microposts/_form.html.erb (3.5ms)
  Rendered microposts/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 68ms (Views: 33.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2016-09-29 12:08:41 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant User::FILL_IN):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.9ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (72.0ms)
Started GET "/" for ::1 at 2016-09-29 12:09:11 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant User::FILL_IN):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.6ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (70.5ms)
Started GET "/" for ::1 at 2016-09-29 12:09:13 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant User::FILL_IN):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.0ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (79.1ms)
Started GET "/" for ::1 at 2016-09-29 12:09:14 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant User::FILL_IN):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.0ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (72.5ms)
Started GET "/" for ::1 at 2016-09-29 12:09:15 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant User::FILL_IN):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.6ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (76.2ms)
Started GET "/" for ::1 at 2016-09-29 12:10:07 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/user.rb:3: syntax error, unexpected tINTEGER, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END):
  
app/models/user.rb:3: syntax error, unexpected tINTEGER, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.8ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (75.9ms)
Started GET "/" for ::1 at 2016-09-29 12:10:11 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/kravi/Documents/beachWork/SampleRails/ralislearning/app/models/user.rb:3: syntax error, unexpected tINTEGER, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END):
  
app/models/user.rb:3: syntax error, unexpected tINTEGER, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.0ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (73.4ms)
Started GET "/" for ::1 at 2016-09-29 12:10:35 +0530
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `to_sym' for 3:Fixnum
Did you mean?  to_s):
  
app/models/user.rb:4:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:7:in `index'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.2ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (79.6ms)
Started GET "/" for ::1 at 2016-09-29 12:10:55 +0530
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 36ms (Views: 30.0ms | ActiveRecord: 0.5ms)


Started GET "/users/new" for ::1 at 2016-09-29 12:10:58 +0530
Processing by UsersController#new as HTML
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (2.7ms)
  Rendered users/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 41ms (Views: 33.2ms | ActiveRecord: 0.8ms)


Started POST "/users" for ::1 at 2016-09-29 12:10:59 +0530
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"S91sBEk9+Ks9J7CQja2VX/+KB/tqvXDMwR2rfO2TGLeaJmAxTknzHZ2CHWrwfnWkLNqb964vSVRQZzpH+FQV3g==", "user"=>{"name"=>"", "email"=>""}, "commit"=>"Create User"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.3ms)


  
NoMethodError (undefined method `3' for #<User:0x007f98cc281c18>):
  
app/controllers/users_controller.rb:30:in `block in create'
app/controllers/users_controller.rb:29:in `create'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.3ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (72.9ms)
Started POST "/users" for ::1 at 2016-09-29 12:12:24 +0530
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"S91sBEk9+Ks9J7CQja2VX/+KB/tqvXDMwR2rfO2TGLeaJmAxTknzHZ2CHWrwfnWkLNqb964vSVRQZzpH+FQV3g==", "user"=>{"name"=>"", "email"=>""}, "commit"=>"Create User"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)


  
ArgumentError (You need to supply at least one attribute):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
app/controllers/users_controller.rb:27:in `create'
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.7ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendering /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /usr/local/lib/ruby/gems/2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (75.3ms)
Started POST "/users" for ::1 at 2016-09-29 12:16:50 +0530
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"S91sBEk9+Ks9J7CQja2VX/+KB/tqvXDMwR2rfO2TGLeaJmAxTknzHZ2CHWrwfnWkLNqb964vSVRQZzpH+FQV3g==", "user"=>{"name"=>"", "email"=>""}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", ""], ["email", ""], ["created_at", 2016-09-29 06:46:50 UTC], ["updated_at", 2016-09-29 06:46:50 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users/1
Completed 302 Found in 26ms (ActiveRecord: 2.8ms)


Started GET "/users/1" for ::1 at 2016-09-29 12:16:50 +0530
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (0.9ms)
Completed 200 OK in 40ms (Views: 29.8ms | ActiveRecord: 0.2ms)


Started GET "/users/1/edit" for ::1 at 2016-09-29 12:16:56 +0530
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (3.1ms)
  Rendered users/edit.html.erb within layouts/application (6.1ms)
Completed 200 OK in 49ms (Views: 45.1ms | ActiveRecord: 0.4ms)


Started PATCH "/users/1" for ::1 at 2016-09-29 12:17:09 +0530
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1tSOVSSklOL7BJU3FriFPVVr/6iEBK/7YYcWczAa8H3ohEYmvX97kQBpuZa87oNuA6/LTb3gqkhpPg7jTAw6mg==", "user"=>{"name"=>"Ravi ", "email"=>"ravik@thoughtworks.com"}, "commit"=>"Update User", "id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "name" = ?, "email" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "Ravi "], ["email", "ravik@thoughtworks.com"], ["updated_at", 2016-09-29 06:47:09 UTC], ["id", 1]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/users/1
Completed 302 Found in 6ms (ActiveRecord: 1.5ms)


Started GET "/users/1" for ::1 at 2016-09-29 12:17:09 +0530
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (0.7ms)
Completed 200 OK in 26ms (Views: 23.0ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2016-09-29 12:17:16 +0530
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  Rendered users/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 27ms (Views: 24.5ms | ActiveRecord: 0.3ms)


Started GET "/users/1" for ::1 at 2016-09-29 12:17:25 +0530
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (0.9ms)
Completed 200 OK in 31ms (Views: 27.1ms | ActiveRecord: 0.3ms)


Started GET "/microposts" for ::1 at 2016-09-29 12:17:41 +0530
Processing by MicropostsController#index as HTML
  Rendering microposts/index.html.erb within layouts/application
  [1m[36mMicropost Load (0.1ms)[0m  [1m[34mSELECT "microposts".* FROM "microposts"[0m
  Rendered microposts/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 33ms (Views: 28.5ms | ActiveRecord: 0.4ms)


Started GET "/microposts/new" for ::1 at 2016-09-29 12:17:48 +0530
Processing by MicropostsController#new as HTML
  Rendering microposts/new.html.erb within layouts/application
  Rendered microposts/_form.html.erb (2.7ms)
  Rendered microposts/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 39ms (Views: 31.0ms | ActiveRecord: 0.7ms)


Started POST "/microposts" for ::1 at 2016-09-29 12:17:51 +0530
Processing by MicropostsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KS51oBqVWvDW7khHp+X4HGNeh1Pk55v2fanoHpvKUlzd7ceTQlAxHr4lFvmS15sSsLC6K1M+wy1woubuS+Zatg==", "micropost"=>{"content"=>"", "user_id"=>""}, "commit"=>"Create Micropost"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  Rendering microposts/new.html.erb within layouts/application
  Rendered microposts/_form.html.erb (3.8ms)
  Rendered microposts/new.html.erb within layouts/application (6.5ms)
Completed 200 OK in 40ms (Views: 35.3ms | ActiveRecord: 0.1ms)


Started POST "/microposts" for ::1 at 2016-09-29 12:18:09 +0530
Processing by MicropostsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jXy9S5DvmIGfPQL6KBIBaWOhLvo+u/xCVPT1xHo2hg+x3hNp59nkxjgo3iByjL7RRfH5UJ97p+r24nZ0+4lrZQ==", "micropost"=>{"content"=>"hi", "user_id"=>"1"}, "commit"=>"Create Micropost"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "microposts" ("content", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["content", "hi"], ["user_id", 1], ["created_at", 2016-09-29 06:48:09 UTC], ["updated_at", 2016-09-29 06:48:09 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/microposts/1
Completed 302 Found in 15ms (ActiveRecord: 1.4ms)


Started GET "/microposts/1" for ::1 at 2016-09-29 12:18:09 +0530
Processing by MicropostsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMicropost Load (0.2ms)[0m  [1m[34mSELECT  "microposts".* FROM "microposts" WHERE "microposts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering microposts/show.html.erb within layouts/application
  Rendered microposts/show.html.erb within layouts/application (0.8ms)
Completed 200 OK in 32ms (Views: 28.5ms | ActiveRecord: 0.2ms)


Started GET "/microposts" for ::1 at 2016-09-29 12:18:13 +0530
Processing by MicropostsController#index as HTML
  Rendering microposts/index.html.erb within layouts/application
  [1m[36mMicropost Load (0.2ms)[0m  [1m[34mSELECT "microposts".* FROM "microposts"[0m
  Rendered microposts/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 38ms (Views: 26.8ms | ActiveRecord: 0.2ms)


Started GET "/microposts" for ::1 at 2016-09-29 12:39:20 +0530
Processing by MicropostsController#index as HTML
  Rendering microposts/index.html.erb within layouts/application
  [1m[36mMicropost Load (0.2ms)[0m  [1m[34mSELECT "microposts".* FROM "microposts"[0m
  Rendered microposts/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 31ms (Views: 28.2ms | ActiveRecord: 0.2ms)


